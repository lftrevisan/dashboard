<div ng-include="'components/navbar/navbar.html'"></div>

<div class="container">

	<div class="row">
		<div class="col-xs-6">
			<div class="input-group">
				<input type="text" ng-model="search" class="form-control" placeholder="Search tickets...">
				<div class="input-group-btn">
					<button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
				</div>
			</div>
		</div>
		<div class="col-xs-2">
			<a ng-href="/ticket/new" class="btn btn-default"><span class="glyphicon glyphicon-plus-sign"></span> New Ticket</a>
		</div>
	</div>

	<br/>

	<table class="table table-striped">
		<thead>
			<tr>
				<th>Author</th>
				<th>Title</th>
				<th>Description</th>
				<th>Created Date</th>
				<th>Status</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="ticket in tickets | filter:search | orderBy:'created'">
				<td>{{ticket.author}}</td>
				<td><a ng-href="/ticket/edit/{{ticket._id}}">{{ticket.title}}</a></td>
				<td>{{ticket.description | limitTo: 20 }}{{ticket.description.length > 20 ? '...' : ''}}</td>
				<td>{{ticket.date | date: 'medium'}}</td>
				<td ng-if="ticket.status < 0"><span class="glyphicon glyphicon-thumbs-down"></span> Failed</td>
				<td ng-if="ticket.status >= 0 && ticket.status < 2"><span class="glyphicon glyphicon-refresh"></span> In-progress</td>
				<td ng-if="ticket.status == 2"><span class="glyphicon glyphicon-thumbs-up"></span> Approved</td>
			</tr>
		</tbody>
	</table>
</div>